{% extends 'base.html' %}
{% block content %}

<div class="max-w-lg mx-auto px-4 py-8">

  <!-- Card Container -->
  <div class="bg-white border border-gray-200 rounded-2xl p-8 shadow-lg">

    <!-- Title -->
    <h2 class="text-2xl font-extrabold text-gray-900 mb-2">
      {% if edit %}Edit{% else %}Add{% endif %} Platform
    </h2>
    <p class="text-gray-500 text-sm mb-6">
      Define a platform name. The slug will be automatically generated.
    </p>

    <!-- Form -->
    <form id="platformForm" method="post" class="flex flex-col gap-4">
      {% csrf_token %}

      <!-- Platform Name -->
      <div>
        <label class="block font-semibold text-gray-700 mb-2">Platform Name</label>
        {{ form.name }}
        {% for e in form.name.errors %}
          <div class="text-red-600 text-sm mt-1">{{ e }}</div>
        {% endfor %}
      </div>

      <!-- Slug (if available) -->
      {% if form.slug %}
      <div>
        <label class="block font-semibold text-gray-700 mb-2">Slug (auto-generated)</label>
        {{ form.slug }}
        {% for e in form.slug.errors %}
          <div class="text-red-600 text-sm mt-1">{{ e }}</div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Actions -->
      <div class="flex gap-3 justify-end mt-4">
        <a href="{% url 'catalog:platform_list' %}" 
           class="px-4 py-2 border border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 transition">
           Cancel
        </a>
        <button type="submit" 
                class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow transition">
          {% if edit %}Save Changes{% else %}Create{% endif %}
        </button>
      </div>

    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Style the name input
    const nameInput = document.querySelector('#id_name');
    if(nameInput){
      nameInput.classList.add(
        'w-full', 'px-4', 'py-3', 'border', 'border-gray-300',
        'rounded-xl', 'text-gray-700', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-400'
      );
    }

    // Style the slug input if present
    const slugInput = document.querySelector('#id_slug');
    if(slugInput){
      slugInput.classList.add(
        'w-full', 'px-4', 'py-3', 'border', 'border-gray-300',
        'rounded-xl', 'text-gray-500', 'bg-gray-100', 'cursor-not-allowed'
      );
      slugInput.setAttribute('readonly', true); // prevent editing
    }
  });
</script>

{% endblock %}
